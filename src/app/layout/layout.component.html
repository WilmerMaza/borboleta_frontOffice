<!-- Top Progress Loader -->
<ngx-loading-bar class="loader-bg" [includeSpinner]="true" [height]="'3px'"></ngx-loading-bar>

<!-- Main Loader -->
@if(themeOptionService.preloader){
  <app-loader></app-loader>
}

<!-- Promotional Banner -->
<app-promotional-banner></app-promotional-banner>

<app-header [logo]="setLogo().header_logo"></app-header>
<router-outlet></router-outlet>
<app-footer [logo]="setLogo().footer_logo"></app-footer>

@if ((themeOption$ | async)?.product?.sticky_product) {
  <app-recent-purchase-popup></app-recent-purchase-popup>
}



<div class="compare-tap-top-box">
  <app-sticky-compare></app-sticky-compare>

  @if((themeOption$ | async)?.general?.back_to_top_enable && show){
    <app-back-to-top></app-back-to-top>
  }
  
  <!-- BotÃ³n flotante ayuda -->
  <div #helpButton 
       class="help-float-btn-container"
       [class.dragging]="isDragging"
       [style.right.px]="helpButtonPosition.right"
       [style.bottom.px]="helpButtonPosition.bottom">
    <a href="https://wa.me/573016268644?text=Â¡Hola!%20ðŸ‘‹%20Necesito%20ayuda.%20Â¿PodrÃ­an%20contactarme?%20Gracias." 
       target="_blank" 
       class="help-float-btn"
       [class.prevent-click]="isDragging || hasDragged"
       (click)="onHelpButtonClick($event)"
       aria-label="Contactar por WhatsApp para ayuda">
      <span class="help-text">Â¿Necesitas ayuda?</span>
      <div class="help-icon">
        <i class="ri-question-line"></i>
      </div>
    </a>
  </div>
</div>

@if((themeOption$ | async)?.popup?.news_letter?.is_enable){
  <app-newsletter-modal #newsletterModal></app-newsletter-modal>
}

@if(!themeOptionService.newsletterModal && exit && (themeOption$ | async)?.popup?.exit?.is_enable){
  <app-exit-modal it-modal #exitModal></app-exit-modal>
}

@if(authService.isLogin){
  <app-login-modal #loginModal></app-login-modal>
}
